import{_ as A,C as P,u as D,b as F,d as M,A as a,D as U,e as c,G as R,P as u,H as G,g as H,I as L,c as l,i as s,k as C,m,p as N,w as T,J as z,K as J,L as K,F as O,r as Q,v as j,l as _,x as p,o as d,y as W,z as X}from"./index.2586e517.js";const Y={setup(){const r=P({}),t=P({}),i=D();async function e(){try{const o=i.params.businessId;await j.getBusinessById(o),_.log(a.business)}catch(o){u.error(o.message),_.error(o)}}async function g(){try{await j.getBusinessRating()}catch(o){u.error(o.message),_.error(o)}}async function y(){try{const o=i.params.businessId;await R.getEmployeesByBusinessId(o),await e(o),g()}catch(o){u.error(o.message),_.error(o)}}return F(()=>{e(),y()}),M(()=>{a.business=null}),U(async()=>{i.params.businessId&&e()}),{editable:r,editable3:t,business:c(()=>a.business),account:c(()=>a.account),employees:c(()=>a.employees),profiles:c(()=>a.profiles),theme:c(()=>a.account.theme),async search(){try{let o=t.value;const f=i.params.businessId;await R.getEmployeeByQuery(o,f)}catch(o){u.error("SEARCHING FOR BUSINESSES",o)}}}},components:{ProfileCard:G,ProfileStarRating:H,EditBusinessOffcanvas:L}},b=r=>(W("data-v-503c99be"),r=r(),X(),r),Z={class:"container-fluid"},$={class:"row"},ss={class:"col-12 g-0 d-flex justify-content-center"},es=["src"],os={class:"col-12 d-flex justify-content-center"},ts={class:"move-logo text-center"},ns=["src"],as={key:0},rs=b(()=>s("div",{class:"my-2"},[s("span",{class:"fs-4"},"Business Owner:")],-1)),is={class:"d-flex justify-content-center align-items-center mb-2"},cs=["src","alt"],ls={class:"fs-4 ms-3"},ds={key:1,class:"w-50 rounded-pill btn btn-outline-success",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasExample","aria-controls":"offcanvasExample"},us=b(()=>s("i",{class:"mdi mdi-pen"},null,-1)),ms=[us],_s={class:"col-12 col-md-6 offset-md-3"},ps=b(()=>s("h2",null,"Top Rated Employees:",-1)),bs={class:"input-group"},fs=b(()=>s("button",{class:"btn btn-outline-secondary",type:"submit",id:"button-addon2"},[s("i",{class:"mdi mdi-magnify"})],-1)),gs={class:"col-12 col-md-8 offset-md-2"};function ys(r,t,i,e,g,y){var h,v,I,w,B,S,E,x;const o=p("ProfileStarRating"),f=p("router-link"),V=p("ProfileCard"),q=p("EditBusinessOffcanvas");return d(),l(O,null,[s("div",Z,[s("div",$,[s("div",ss,[s("img",{class:"coverImg",src:(h=e.business)==null?void 0:h.coverImg,alt:"",onerror:"this.src='broken-cover-image.jpg'"},null,8,es)]),s("div",os,[s("span",ts,[s("img",{class:"business-logo",src:(v=e.business)==null?void 0:v.logo,alt:"",onerror:"this.src='broken-image.png'"},null,8,ns),s("h1",null,C((I=e.business)==null?void 0:I.name),1),(w=e.business)!=null&&w.id?(d(),l("div",as,[m(o,{rating:(B=e.business)==null?void 0:B.rating},null,8,["rating"])])):N("",!0),rs,s("div",is,[m(f,{to:{name:"Profile",params:{profileId:(S=e.business)==null?void 0:S.owner.id}}},{default:T(()=>{var n,k;return[s("img",{src:(n=e.business)==null?void 0:n.owner.picture,alt:(k=e.business)==null?void 0:k.owner.name,class:"rounded-circle border border-dark border-2 ownerIcon",height:"75",width:"75",onerror:"this.src='broken-image.png'"},null,8,cs)]}),_:1},8,["to"]),s("span",ls,C((E=e.business)==null?void 0:E.owner.name),1)]),e.account.id==((x=e.business)==null?void 0:x.ownerId)?(d(),l("button",ds,ms)):N("",!0)])]),s("div",_s,[ps,s("form",{class:"mb-4",onSubmit:t[1]||(t[1]=z(n=>e.search(),["prevent"]))},[s("div",bs,[J(s("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.editable3.query=n),class:"form-control",placeholder:"Search Employees","aria-describedby":"button-addon2","aria-label":"Search Employees",type:"text"},null,512),[[K,e.editable3.query]]),fs])],32)]),(d(!0),l(O,null,Q(e.employees,n=>(d(),l("div",gs,[m(V,{profile:n},null,8,["profile"])]))),256))])]),m(q)],64)}const vs=A(Y,[["render",ys],["__scopeId","data-v-503c99be"]]);export{vs as default};
