import{_ as G,u as L,C as Q,D as U,c,A as s,P as i,O as b,H as M,R as V,Q as z,S as W,U as Y,V as q,j as H,W as J,a as n,b as t,q as d,n as h,s as l,m as B,F as D,v as K,z as f,o as r,p as X,e as Z,M as y,x as $}from"./index.01481bc1.js";const ee={setup(){const a=L(),p=Q({});async function w(){try{const e=a.params.profileId;await y.generateQRCode(e)}catch(e){i.error(e.message,"[GENERATING QR CODE]")}}async function o(){try{const e=a.params.profileId;await y.getProfileById(e)}catch(e){i.error(e.message,"[GETTING PROFILE BY ID]")}}async function I(){try{const e=a.params.profileId;await $.calculateProfileRating(e)}catch(e){i.error(e.message,"[CALCULATING PROFILE RATING]")}}async function R(){try{const e=a.params.profileId;await y.getReviewsByProfileId(e)}catch(e){i.error(e.message,"[GETTING REVIEWS BY PROFILE ID]")}}async function u(){try{const e=a.params.profileId;await b.getChat(e)}catch(e){i.error(e,"[getting chat]")}}async function g(){try{await b.getFeedbackInChat()}catch(e){i.error(e,"[getting feedback]")}}return U(async()=>{a.params.profileId&&(o(),w(),R(),I(),u())}),{editable:p,route:a,QRCode:c(()=>s.QRCode),profile:c(()=>s.profile),profiles:c(()=>s.profiles),reviews:c(()=>s.reviews),businesses:c(()=>s.businesses),account:c(()=>s.account),theme:c(()=>s.account.theme),chat:c(()=>s.chat),searchTypeDate(){s.reviewSearchType="date",s.reviews.sort(function(e,_){return new Date(e.createdAt)-new Date(_.createdAt)}).reverse()},searchTypeRating(){s.reviewSearchType="rating",s.reviews.sort(function(e,_){return e.rating-_.rating}).reverse()},async openChat(){try{await g()}catch(e){i.error(e,"[open chat]")}},async createChat(){try{const e=a.params.profileId;await b.createChat(e),await g()}catch(e){i.error(e,"[creating chat]")}}}},components:{ProfileCard:M,ReviewCard:V,ProfileCarousel:z,RateProfileOffcanvas:W,FeedbackOffcanvas:Y,TipUserModal:q,ProfileStarRating:H,AddEmployee:J}},m=a=>(X("data-v-5826dc08"),a=a(),Z(),a),te={key:0,class:"ProfilePage"},oe={class:"container-fluid"},ae={class:"row mt-1"},se={class:"col-12"},ne={class:"row align-items-center"},re={class:"col-6 d-md-none"},ce={class:"fs-1 mb-1"},ie={key:0,class:"col-6 offset-md-6 text-end"},de={key:0,class:"btn dropstart"},le=m(()=>t("ul",{class:"dropdown-menu text-center"},[t("li",null,[t("a",{class:"dropdown-item selectable","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasTop","aria-controls":"offcanvasTop"},"Add to business")])],-1)),fe={class:"row justify-content-center"},pe={class:"col-12"},_e={class:"col-12 mt-2 d-flex flex-column justify-content-center align-items-center"},ue={key:0,class:"pt-2"},ge={class:"col-12 d-md-flex justify-content-center d-none fs-2"},me={key:0,class:"d-flex justify-content-around my-2"},ve={key:0,class:"col-6 d-flex justify-content-center"},be=m(()=>t("button",{class:"btn tip-button elevation-2 rounded-pill px-4","data-bs-toggle":"modal","data-bs-target":"#tipUserModal"},"Tip",-1)),he=[be],ye={key:1,class:"col-6 d-flex justify-content-center"},we=m(()=>t("button",{class:"btn review-button elevation-2 rounded-pill","data-bs-toggle":"offcanvas","data-bs-target":"#reviewOffcanvas","aria-controls":"reviewOffcanvas"},"Review",-1)),Ie=[we],Re={class:"col-12 mt-1"},Ce={class:"d-flex flex-column align-items-center"},Pe=m(()=>t("div",{class:"mb-2"},[t("span",null," Sort reviews by: ")],-1)),xe={class:"btn-group",role:"group","aria-label":"Basic outlined example"},ke={class:"row justify-content-center my-3"},Te={class:"col-11 rounded p-2 col-md-8"};function Se(a,p,w,o,I,R){var C,P,x,k,T,S,E,O,A;const u=f("ProfileStarRating"),g=f("ProfileCarousel"),e=f("ReviewCard"),_=f("RateProfileOffcanvas"),F=f("TipUserModal"),N=f("AddEmployee"),j=f("FeedbackOffcanvas");return r(),n(D,null,[o.profile?(r(),n("div",te,[t("div",oe,[t("div",ae,[t("div",se,[t("div",ne,[t("div",re,[t("div",ce,[d(u,{rating:(C=o.profile)==null?void 0:C.rating},null,8,["rating"])])]),((P=o.account)==null?void 0:P.id)!=((x=o.profile)==null?void 0:x.id)?(r(),n("div",ie,[o.account.id?(r(),n("div",de,[t("button",{class:h(["btn btn-secondary-outline btn-sm dropdown-toggle fs-4",[o.theme?"text-dark":"text-light"]]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," ... ",2),le])):l("",!0)])):l("",!0)]),t("div",fe,[t("div",pe,[d(g)]),t("div",_e,[t("h1",null,B((k=o.profile)==null?void 0:k.name),1),(T=o.profile)!=null&&T.bio?(r(),n("p",ue,'"'+B((S=o.profile)==null?void 0:S.bio)+'"',1)):l("",!0)]),t("div",ge,[d(u,{rating:(E=o.profile)==null?void 0:E.rating},null,8,["rating"])]),o.account.id?(r(),n("div",me,[((O=o.profile)==null?void 0:O.id)!=o.account.id?(r(),n("div",ve,he)):l("",!0),((A=o.profile)==null?void 0:A.id)!=o.account.id?(r(),n("div",ye,Ie)):l("",!0)])):l("",!0),t("div",Re,[t("div",Ce,[Pe,t("div",xe,[t("button",{onClick:p[0]||(p[0]=v=>o.searchTypeDate()),type:"button",class:h(["btn btn-sm",o.theme?"btn-outline-dark":"btn-outline-light"]),style:{"--bs-btn-padding-y":".25rem","--bs-btn-padding-x":".5rem","--bs-btn-font-size":".75rem"}},"Date",2),t("button",{onClick:p[1]||(p[1]=v=>o.searchTypeRating()),type:"button",class:h(["btn btn-sm",o.theme?"btn-outline-dark":"btn-outline-light"]),style:{"--bs-btn-padding-y":".25rem","--bs-btn-padding-x":".5rem","--bs-btn-font-size":".75rem"}},"Rating",2)])])])]),t("div",ke,[(r(!0),n(D,null,K(o.reviews,v=>(r(),n("div",Te,[d(e,{review:v},null,8,["review"])]))),256))])])])])])):l("",!0),d(_),d(F),d(N),d(j)],64)}const Oe=G(ee,[["render",Se],["__scopeId","data-v-5826dc08"]]);export{Oe as default};
